!function($){$.fn.willslide=function(options){return methods[options]?methods[options].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof options&&options?void $.error("Method "+options+" does not exist on jQuery.willslide"):methods.init.apply(this,arguments)};var methods={init:function(options){var el=this;return willSlideSettings=$.extend({width:1500,height:500,maxWidth:0},options),willSlideSettings.maxWidth<willSlideSettings.width&&(willSlideSettings.maxWidth=willSlideSettings.width),el.running=!1,el.totalSlides=methods.countSlides(el),el.slidesOrder=[],el.currentSlidesOrder=[],el.timer=0,el.windowW=$(window).width(),el.windowH=$(window).height(),el.scale=methods.scale(el),el.scaleMaxW=methods.scaleMaxW(el),methods.hide(el),methods.loadImages(el),methods.build(el),$(window).resize(function(){el.windowW=$(window).width(),el.windowH=$(window).height(),el.scale=methods.scale(el),el.scaleMaxW=methods.scaleMaxW(el),methods.resize(el)}),this},loadImages:function(el){function imageLoaded(){counter--,0===counter&&(el.show(),methods.coverImages(el))}var images=el.find("img"),counter=images.length;images.each(function(){this.complete?imageLoaded.call(this):$(this).one("load",imageLoaded)})},countSlides:function(el){var slides=el.find(".slide").length;return slides},build:function(el){el.find(".slide").each(function(e){$(this).addClass("slide"+(e+1)),el.slidesOrder.push(e+1)});el.find("[willslidelayer]").each(function(){$(this).wrap("<div class='layer-wrapper'><div class='layer'></div></div>")}),methods.resize(el)},scale:function(el){var scale=el.windowW/willSlideSettings.width;return scale},scaleMaxW:function(el){var scale=el.windowW/willSlideSettings.maxWidth;return scale},resize:function(el){var slideMaxW=willSlideSettings.maxWidth,slideW=willSlideSettings.width,slideH=willSlideSettings.height;if(el.css({width:el.windowW}),slideMaxW>slideW)if(el.windowW>slideMaxW)el.css({height:willSlideSettings.height*el.scaleMaxW}),el.find(".layer").each(function(){$(this).css({width:"100%",height:"100%",left:0})});else if(el.windowW>slideW){var left=(el.windowW-slideMaxW)/2;el.css({height:willSlideSettings.height}),el.find(".layer").each(function(){$(this).css({width:slideMaxW,height:slideH,left:left})})}else{var left=(el.windowW-slideMaxW*el.scale)/2;el.css({height:willSlideSettings.height*el.scale}),el.find(".layer").each(function(){$(this).css({width:slideMaxW*el.scale,height:slideH*el.scale,left:left}),console.log(left)})}else el.css({height:willSlideSettings.height*el.scale})},coverImages:function(el){el.find("img[willslidelayer='full']").each(function(){$(this).css({width:willSlideSettings.maxWidth,height:"auto",position:"absolute"}),console.log($(this).width());var rel=1/($(this).height()/willSlideSettings.height),left=($(this).width()*rel-$(this).width())/2,leftPercent=left/$(this).width();console.log(leftPercent),rel>1&&$(this).css({width:100*rel+"%",left:-(100*leftPercent)+"%"})})},hide:function(el){el.hide(),console.log("hide")},play:function(el){console.log("rodei play")},stop:function(el){console.log("rodei stop")}}}(jQuery);