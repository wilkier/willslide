!function($){var focused=!0;$.willslide=function(element,options){var el=$(element);el.vars=$.extend({},$.willslide.defaults,options),el.vars.maxWidth<el.vars.width&&(el.vars.maxWidth=el.vars.Width),el.data("willslide",el);var methods={init:function(){return el.addClass("willslide"),el.vars.init(),el.isAnimating=!1,el.isStopped=!1,el.totalSlides=methods.countSlides(el),el.slidesOrder=[],el.currentSlide=1,el.currentTime=0,el.windowW=$(window).width(),el.windowH=$(window).height(),el.scale=methods.scale(el),el.scaleMaxW=methods.scaleMaxW(el),methods.hide(el),methods.loadImages(el),methods.build(el),$(window).resize(function(){el.windowW=$(window).width(),el.windowH=$(window).height(),el.scale=methods.scale(el),el.scaleMaxW=methods.scaleMaxW(el),methods.callBackTimer(methods.resize,500,1,1)}),this},callBackTimer:function(func,time,repeat,playBefore){var counter=0;null!=repeat&&0!=repeat||(repeat=1),playBefore&&func();var loop=setInterval(function(){func(),counter++,counter>=repeat&&clearInterval(loop)},time)},loadImages:function(){function imageLoaded(){counter--,0===counter&&(el.show(),el.vars.start(),methods.coverImages(),methods.slideTimer(),methods.animate())}var images=el.find("img"),counter=images.length;images.each(function(){this.complete?imageLoaded.call(this):$(this).one("load",imageLoaded)})},slideTo:function(nextSlide){if(el.isAnimating)console.log("Wait the slide animation please");else if(el.currentSlide!=nextSlide){el.currentSlide=nextSlide,el.isAnimating=!0;var next=el.find(".slide"+nextSlide),exitingSlide=el.find(".current");exitingSlide.addClass("goodbye").removeClass("current"),next.addClass("current"),$(".bullet.current-bullet").removeClass("current-bullet"),$(".bullet"+nextSlide).addClass("current-bullet"),exitingSlide.animate({opacity:0},100),el.currentTime=0,setTimeout(function(){exitingSlide.removeClass("goodbye"),exitingSlide.css({opacity:1}),el.isAnimating=!1,el.isStopped&&el.stopSlider(),methods.animate()},200)}else console.log("Can't slide to the current slide")},slideTimer:function(){el.vars.showTimeBar?setInterval(function(){if(!el.isStopped&&focused&&!el.isAnimating){el.currentTime+=el.vars.refreshStep,el.currentTime>el.vars.time&&(el.currentTime=0,methods.autoSlide());var percentLoad=el.currentTime/el.vars.time*100;el.find(".willslide-loading").css("width",percentLoad+"%")}},el.vars.refreshStep):setInterval(function(){el.isStopped||!focused||el.isAnimating||(el.currentTime+=el.vars.refreshStep,el.currentTime>el.vars.time&&(el.currentTime=0,methods.autoSlide()))},el.vars.refreshStep)},autoSlide:function(){var order=el.find(".current").data("slideOrder");order==el.totalSlides?(nextSlide=1,methods.slideTo(nextSlide)):(nextSlide=order+1,methods.slideTo(nextSlide))},countSlides:function(){var slides=el.find(".slide").length;return slides},build:function(){el.find(".slide").each(function(e){if(el.vars.thumbs){methods.createBullets(),el.find(".bullet-container").append("<div class='bullet bullet"+(e+1)+"'></div>");var bullet=el.find(".bullet"+(e+1));bullet.data("order",e+1),bullet.click(function(){var nextSlide=bullet.data("order");methods.slideTo(nextSlide)}),0==e&&bullet.addClass("current-bullet")}0==e&&$(this).addClass("current"),$(this).addClass("slide"+(e+1)),$(this).data("slideOrder",e+1)});el.find(".slide").each(function(){$(this).children("div").each(function(){$(this).wrap("<div class='layer-wrapper'><div class='layer'></div></div>"),$(this).parent(".layer").css({width:el.vars.maxWidth,height:el.vars.height}),methods.transformOrigin($(this).parent(".layer").parent(".layer-wrapper"),"left top")})}),el.find("[willslidelayer]").each(function(){$(this).wrap("<div class='layer-wrapper'><div class='layer'></div></div>"),$(this).parent(".layer").css({width:el.vars.maxWidth,height:el.vars.height}),methods.transformOrigin($(this).parent(".layer").parent(".layer-wrapper"),"left top")}),el.vars.showTimeBar&&methods.createTimeBar(),el.vars.controls&&methods.createControls(),el.vars.nav&&methods.createNav(),methods.getAnimateVars(),methods.resize()},createTimeBar:function(){el.append("<div class='willslide-loading'></div>")},createControls:function(){el.find(".sliderControl").length||el.append("<div class='sliderControl'><span class='will-play'>PLAY</span><span class='will-stop' >STOP</span></div>"),el.find(".will-play").click(function(){el.stopSlider()}),el.find(".will-stop").click(function(){el.stopSlider()})},createNav:function(){el.find(".nav-next").length||el.append("<div class='nav-next will-slide-next'>NEXT</div>"),el.find(".nav-prev").length||el.append("<div class='nav-prev will-slide-prev'>PREV</div>"),el.find(".nav-next").click(function(){el.next()}),el.find(".nav-prev").click(function(){el.prev()})},createBullets:function(){el.find(".bullet-container").length||el.append("<div class='bullet-container'></div>")},scale:function(){var scale=el.windowW/el.vars.width;return scale},scaleMaxW:function(){var scale=el.windowW/el.vars.maxWidth;return scale},getAnimateVars:function(){el.find("[animate]").each(function(){var animatedElement=$(this);dataString=animatedElement.attr("animate"),dataString=dataString.replace(/ /g,""),data=dataString.split(","),dtop=null,dleft=null,time=null,delay=null,ease=null,dleftreverse=1,dtopreverse=1,data.forEach(function(value){null==dtop&&(dtop=value.split("dtop:")[1]),null==dleft&&(dleft=value.split("dleft:")[1]),null==time&&(time=value.split("time:")[1]),null==delay&&(delay=value.split("delay:")[1]),null==ease&&(ease=value.split("ease:")[1])}),null==dtop&&(dtop=0),null==dleft&&(dleft=0),null==time&&(time=0),null==delay&&(delay=0),null==ease&&(ease="linear"),dtop<0&&(dtop*=-1,dtopreverse=-1),dleft<0&&(dleft*=-1,dleftreverse=-1),animatedElement.parent(".layer").data({dtop:dtop,dleft:dleft,dleftreverse:dleftreverse,dtopreverse:dtopreverse,time:time,delay:delay,ease:ease}).addClass("animated-layer to-load")})},animate:function(){el.vars.before(),el.find(".animated-layer.to-load").each(function(){var animatedElement=$(this),dleft=animatedElement.data("dleft")*animatedElement.data("dleftreverse"),dtop=animatedElement.data("dtop")*animatedElement.data("dtopreverse"),transform="translate("+dleft+"%, "+dtop+"%)";animatedElement.stop().css({"padding-left":animatedElement.data("dleft")+"px","padding-top":animatedElement.data("dtop")+"px"}),methods.transform(animatedElement,transform),animatedElement.removeClass("to-load")});var current=el.find(".current");current.find(".animated-layer").each(function(){var animatedElement=$(this),time=parseInt(animatedElement.data("time")),offX=0;setTimeout(function(){current.hasClass("current")&&animatedElement.animate({"padding-left":0,"padding-top":0},{easing:animatedElement.data("ease"),duration:time,complete:function(){el.vars.after()},step:function(now,fx){if("paddingLeft"===fx.prop)offX=now*animatedElement.data("dleftreverse");else if("paddingTop"===fx.prop){var offY=now*animatedElement.data("dtopreverse"),transform="translate("+offX+"%,"+offY+"%)";console.log(transform),methods.transform($(this),transform)}}})},animatedElement.data("delay")),animatedElement.addClass("to-load")})},transform:function(elem,transform){elem.css({"-ms-transform":transform,"-webkit-transform":transform,"-moz-transform":transform,transform:transform})},transformOrigin:function(elem,value){elem.css({"-ms-transform-origin":value,"-webkit-transform-origin":value,"-moz-transform-origin":value,"transform-origin":value})},resize:function(){var slideMaxW=el.vars.maxWidth,slideW=el.vars.width;el.vars.height;if(el.css({width:el.windowW}),slideMaxW>slideW)if(el.windowW>slideMaxW){var left=(el.windowW-slideMaxW)/2;el.css({height:el.vars.height*el.scaleMaxW}),el.find(".layer-wrapper").each(function(){methods.transform($(this),"scale("+el.scaleMaxW+")"),$(this).css("left",0)})}else if(el.windowW>slideW){el.css({height:el.vars.height});var left=(el.windowW-slideMaxW)/2,scale=1;el.find(".layer-wrapper").each(function(){methods.transform($(this),"scale("+scale+") translate("+left+"px, 0px)"),$(this).css("left",0)})}else{el.css({height:el.vars.height*el.scale});var left=(el.windowW-slideMaxW*el.scale)/2;el.find(".layer-wrapper").each(function(){methods.transform($(this),"scale("+el.scale+")"),$(this).css("left",left)})}else el.css({height:el.vars.height*el.scale}),el.find(".layer-wrapper").each(function(){methods.transform($(this),"scale("+el.scaleMaxW+")")})},coverImages:function(){el.find("img[willslidelayer='full']").each(function(){$(this).css({width:el.vars.maxWidth,height:"auto",position:"absolute"});var scale=$(this).height()/el.vars.height;if(1>scale){var rel=1/scale,left=($(this).width()*rel-$(this).width())/2,leftPercent=left/$(this).width();$(this).css({width:100*rel+"%",left:-(100*leftPercent)+"%"})}else{var rel=scale,top=($(this).height()*rel-$(this).height())/2,topPercent=top/$(this).height();$(this).css({width:"100%",top:-(100*topPercent)+"%"})}})},hide:function(){el.hide()}};el.next=function(){methods.autoSlide()},el.prev=function(){var order=el.find(".current").data("slideOrder");1==order?(nextSlide=el.totalSlides,methods.slideTo(nextSlide)):(nextSlide=order-1,methods.slideTo(nextSlide))},el.stopSlider=function(){el.isStopped?(el.vars.callplay(),el.isStopped=!1,el.removeClass("stopped")):(el.vars.callstop(),el.isStopped=!0,el.addClass("stopped"))},methods.init()},$(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),$.willslide.defaults={width:1500,height:500,maxWidth:0,time:8e3,showTimeBar:!0,refreshStep:20,controls:!0,nav:!0,thumbs:!0,start:function(){},before:function(){},after:function(){},callstop:function(){},callplay:function(){},init:function(){}},$.fn.willslide=function(options){if(void 0===options&&(options={}),"object"==typeof options)new $.willslide(this,options);else{var $slider=$(this).data("willslide");switch(options){case"play":case"stop":$slider.stopSlider();break;case"next":$slider.next();break;case"prev":case"previous":$slider.prev();break;default:console.log("This callback doesn't exist")}}}}(jQuery);